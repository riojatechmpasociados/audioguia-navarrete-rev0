<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audioguía</title>
</head>
<body>
    <h1>Bienvenido a la Audioguía</h1>
    <p>Contenido exclusivo para quienes pagaron.</p>

    <!-- Contenido de la audioguía (inicialmente oculto) -->
    <div id="content" style="display: none;">
        <p>¡Aquí está tu contenido exclusivo de la audioguía!</p>
    </div>

    <!-- Mensaje de error si el token no es válido -->
    <div id="error" style="display: none;">
        <p>El acceso a esta página ha expirado o no es válido.</p>
    </div>

    <script>
        // Obtener el parámetro 'access_token' de la URL
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get('access_token');  // token de la URL

        // Verificar el token en el servidor (API Gateway)
        fetch(`https://tu_api_gateway.com/verifyToken?token=${token}`)
            .then(response => response.json())  // Convertir la respuesta en JSON
            .then(data => {
                if (data.isValid) {
                    // Si el token es válido, mostrar el contenido de la audioguía
                    document.getElementById('content').style.display = 'block';
                } else {
                    // Si el token no es válido o ha expirado, mostrar el mensaje de error
                    document.getElementById('error').style.display = 'block';
                }
            })
            .catch(error => {
                console.error('Error al verificar el token:', error);
                document.getElementById('error').style.display = 'block';  // Mostrar error si hay un problema con la solicitud
            });
    </script>
</body>
</html>
